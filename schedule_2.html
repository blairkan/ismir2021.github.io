---
layout: schedule
title: Schedule
permalink: /scheduledp/
---
<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


<div id="dp"> </div>



<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment-with-locales.min.js"></script>
<script src="{{ '/assets/js/daypilot-all.min.js' | relative_url }}"></script>
<link type="text/css" rel="stylesheet" href="{{ '/assets/css/calendar_white.css' | relative_url }} " />


<script> 
	$(document).ready(() => {
    	myModal = new bootstrap.Modal(document.getElementById('myModal'));	
    });
	
	const colormap = { 
		"Special": "#BA274A",
		"Tutorial": "#0CA7DB",
		"WiMIR": "#19535f",
		"Music": "#ECE5F0",
		"Social": "#9D6381",
		"Main": "#FAA916"
	};

	function add_to_DayPilot(dp, json){
		for(var i in json.schedule){
	    	const date = json.schedule[i].date;
	    	const start = json.schedule[i].start_time;
	    	const end = json.schedule[i].end_time;
	    	const event_type = json.schedule[i].type;
	    	const event_start = moment.utc(date+" "+start).toDate();
	    	const event_end = moment.utc(date+" "+end).toDate();
	    	const dp_e = new DayPilot.Event({
	    		start: new DayPilot.Date(event_start),
	    		end: new DayPilot.Date(event_end),
	    		id: DayPilot.guid(),
	    		text: `${json.schedule[i].title} <br/> ${start} - ${end}`,
	    		tag: {"type": event_type},
	    		backColor: colormap[event_type],
	    		fontColor: event_type === "Music" ? "black" : "white",
	    		fontSize: "1em"
	    	});
	    	console.log(dp.events.add(dp_e));
    	}
	}

	console.log("Hello?");
	const nov6 = JSON.parse('{{ site.data.nov6 | jsonify }}');
	const nov7 = JSON.parse('{{ site.data.nov7 | jsonify }}');
	const nov8 = JSON.parse('{{ site.data.nov8 | jsonify }}');
	const nov9 = JSON.parse('{{ site.data.nov9 | jsonify }}');
	const nov10 = JSON.parse('{{ site.data.nov10 | jsonify }}');
	const nov11 = JSON.parse('{{ site.data.nov11 | jsonify }}');
	const nov12 = JSON.parse('{{ site.data.nov12 | jsonify }}');
	const days = [nov6, nov7, nov8, nov9, nov10, nov11, nov12];
	var dp = $("#dp").daypilotCalendar({
	  cssClassPrefix: "calendar_white",
      startDate: new DayPilot.Date("2021-11-06"),
      endDate: new DayPilot.Date("2021-11-13"),
      rowHeaderWidthAutoFit: true,
      rowHeaderScrolling: true,
      progressiveRowRendering: true, 	
      dayBeginsHour: 6,
      dayEndsHour: 0,
      days: 7,
      cellDuration:30,
      viewType: "Resource",
      allowEventOverlap: false,
      eventArrangement: "SideBySide",
      timeRangeSelectedHandling: "Disabled",
      eventDeleteHandling: "Disabled",
      eventMoveHandling: "Disabled",
      eventResizeHandling: "Disabled",
      onEventClicked: (args) => {
	    	console.log("Event clicked: " + JSON.stringify(args.e));
	    	console.log(myModal);
	    	$('#myModal').appendTo("body");
	    	$(".modal-title").html(`${args.e.text()}`);
	    	myModal.show();
	    	$(".modal-backdrop").hide()
	  	  },
      eventHoverHandling: "Disabled",
    });
	days.map(i => add_to_DayPilot(dp, i));
	dp.init();

</script>